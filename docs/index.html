<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vom LDR zum Fotometer ‚Äì Ein Lernmodul zur Sensorkalibrierung und quantitativen Messdatenauswertung</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <!-- highlight.js (atom-one-dark) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <!-- Mathjax -->
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <!-- p5.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.2/p5.js"></script>
  <!-- plotly.js -->
  <script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>
  <!-- highlight.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <style>
    :root {
      --kit-primary-color: #4CAF50;
      --kit-secondary-color: #45a049;
      --header-height: 80px;
      --progressbar-height: 8px;
      --correct-color: #28a745;
      --incorrect-color: #dc3545;
      --font-main: 'Roboto', sans-serif;
      --font-title: 'Roboto', sans-serif;
      --section-radius: 18px;
      --section-shadow: 0 8px 32px rgba(44,62,80,0.08);
      --section-bg: #fff;
      --section-margin: 36px;
      --section-padding: 48px 24px;
      --emoji-opacity: 0.08;
    }
    html, body {
      margin: 0;
      padding: 0;
      font-family: var(--font-main);
      background: linear-gradient(180deg, #f7faf9 0%, #e8f5e9 100%);
      color: #222;
      min-height: 100vh;
    }
    .kit-header {
      position: fixed;
      top: 0; left: 0; right: 0;
      height: var(--header-height);
      background: #fff;
      box-shadow: 0 2px 8px rgba(44,62,80,0.06);
      z-index: 100;
      display: flex;
      align-items: center;
      padding: 0 32px;
      gap: 24px;
    }
    .kit-header img {
      height: 48px;
      width: 48px;
      border-radius: 8px;
      background: #f4f4f4;
      object-fit: contain;
    }
    .kit-header .header-titles {
      flex: 1;
      min-width: 0;
    }
    .kit-header .header-titles .title {
      font-family: var(--font-title);
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--kit-primary-color);
      margin-bottom: 2px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .kit-header .header-titles .subtitle {
      font-size: 1rem;
      color: #555;
      font-weight: 400;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .kit-header .header-btn {
      background: var(--kit-primary-color);
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 18px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.2s, transform 0.2s;
      margin-left: 12px;
    }
    .kit-header .header-btn:hover, .kit-header .header-btn:focus {
      background: var(--kit-secondary-color);
      transform: scale(1.05);
    }
    .progress-container {
      position: fixed;
      top: var(--header-height);
      left: 0; right: 0;
      height: var(--progressbar-height);
      background: #e0e0e0;
      z-index: 101;
    }
    .progress-bar {
      height: 100%;
      width: 0%;
      background: var(--kit-primary-color);
      transition: width 0.2s;
    }
    main {
      margin-top: calc(var(--header-height) + var(--progressbar-height) + 24px);
      padding-bottom: 48px;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }
    .content-section {
      background: var(--section-bg);
      border-radius: var(--section-radius);
      box-shadow: var(--section-shadow);
      margin-bottom: var(--section-margin);
      padding: var(--section-padding);
      position: relative;
      opacity: 0;
      transform: translateY(40px);
      transition: opacity 0.7s cubic-bezier(.4,0,.2,1), transform 0.7s cubic-bezier(.4,0,.2,1);
      will-change: opacity, transform;
    }
    .content-section.is-visible {
      opacity: 1;
      transform: none;
    }
    .section-emoji {
      position: absolute;
      right: 24px;
      bottom: 18px;
      font-size: 7rem;
      opacity: var(--emoji-opacity);
      pointer-events: none;
      user-select: none;
    }
    h1, h2, h3, h4 {
      font-family: var(--font-title);
      color: var(--kit-primary-color);
      margin-top: 0;
    }
    h1 { font-size: 2.2rem; }
    h2 { font-size: 1.5rem; }
    h3 { font-size: 1.2rem; }
    .material-list {
      list-style: none;
      padding: 0;
      margin: 0 0 16px 0;
    }
    .material-list li {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .material-list li i {
      color: var(--kit-primary-color);
      font-size: 1.1em;
    }
    .ldr-simulation-container {
      margin: 24px 0;
      background: #f8f8f8;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(44,62,80,0.04);
      padding: 18px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #ohmmeter-display-1-1 {
      background-color: #f4f4f4;
      border: 2px solid #333;
      border-radius: 5px;
      padding: 15px;
      margin-top: 15px;
      text-align: center;
      font-family: 'Courier New', Courier, monospace;
      font-size: 1.5em;
      font-weight: bold;
      color: #000;
    }
    /* ... weitere Styles f√ºr Akkordeon, Flip-Karten, Reveal-Boxen, Quiz, Copy-Button, Mermaid, etc. ... */
    /* Responsive */
    @media (max-width: 700px) {
      main { padding: 0 4vw; }
      .content-section { padding: 32px 8px; }
      .kit-header { padding: 0 8px; }
    }
    .ldr-simulator-container-adv {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background-color: #f7f9fc;
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 20px;
        max-width: 500px;
        margin: 20px auto;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }
    .ldr-simulator-container-adv h3,
    .ldr-simulator-container-adv h4 {
        margin-top: 0;
        text-align: center;
        color: #333;
    }
    .slider-group {
        margin-bottom: 25px;
        padding: 15px;
        background: #fff;
        border-radius: 6px;
        border: 1px solid #e0e0e0;
    }
    .slider-group label {
        display: block;
        margin-bottom: 10px;
        font-weight: 600;
        color: #005a9c;
    }
    .slider-wrapper {
        display: flex;
        align-items: center;
        gap: 15px;
        font-size: 0.9em;
    }
    .slider-wrapper input[type="range"] {
        flex-grow: 1;
        cursor: pointer;
    }
    /* Anzeige f√ºr R1-Wert */
    [classid="r1-value-display"] { 
        text-align: center;
        margin-top: 10px;
        font-size: 0.9em;
        color: #444;
    }
    .circuit-info-adv {
        font-size: 0.9em;
        color: #555;
        background-color: #e9ecef;
        padding: 10px 15px;
        border-radius: 6px;
        margin-bottom: 20px;
    }
    .circuit-info-adv p {
        margin: 4px 0;
        font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
    }
    .data-display-adv {
        background-color: #fff;
        border: 1px solid #e0e0e0;
        padding: 10px 15px;
        border-radius: 6px;
    }
    .data-display-adv p {
        margin: 12px 0;
        display: flex;
        justify-content: space-between;
        font-size: 1.1em;
    }
    .data-display-adv hr {
        border: 0;
        border-top: 1px dashed #ccc;
        margin: 10px 0;
    }
    .data-display-adv strong {
        color: #d9534f; /* Auff√§llige Farbe f√ºr Ergebnisse */
        font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
        font-size: 1.1em;
    }
  </style>
</head>
<body>
  <header class="kit-header" role="banner" aria-label="Modultitel und Fortschrittsanzeige">
    <img src="docs/Media/Images/NWTLOGO.png" alt="NWT Logo" />
    <div class="header-titles">
      <div class="title">Vom LDR zum Fotometer</div>
      <div class="subtitle">Ein Lernmodul zur Sensorkalibrierung und quantitativen Messdatenauswertung</div>
    </div>

  </header>
  <div class="progress-container"><div class="progress-bar" id="progress-bar"></div></div>
  <main>
    <!-- Einf√ºhrung -->
    <section class="content-section" id="intro">
      <div class="section-emoji">üìö</div>
      <h1>Vom LDR zum Fotometer</h1>
      <p class="lead">Ein Lernmodul zur Sensorkalibrierung und quantitativen Messdatenauswertung</p>
      <p><strong>Autor:</strong> John van Dijk</p>
      <p><strong>Lizenzhinweis:</strong> CC BY-SA 4.0</p>
      <div class="quiz-block" style="background:#e8f5e9;">
        <i class="fa-solid fa-circle-info"></i>
        Dieses Modul richtet sich an Einsteiger*innen. Falls du ganz neu bist, folge bitte der Vorbereitung unten.
      </div>
      <h2>Vorbereitung & Werkzeuge</h2>
      <ul class="material-list">
        <li><i class="fa-solid fa-download"></i> Arduino IDE installieren: <a href="https://www.arduino.cc/en/software" target="_blank" rel="noopener">arduino.cc/en/software</a></li>
        <li><i class="fa-solid fa-download"></i> CH340-Treiber (falls ben√∂tigt): <a href="https://sparks.gogo.co.nz/ch340.html" target="_blank" rel="noopener">sparks.gogo.co.nz/ch340.html</a></li>
        <li><i class="fa-solid fa-bread-slice"></i> Breadboard verstehen: <a href="https://learn.sparkfun.com/tutorials/how-to-use-a-breadboard/all" target="_blank" rel="noopener">SparkFun Breadboard Guide</a></li>
      </ul>
    </section>
    <!-- 1. Technische Grundlagen: LDR am Microcontroller -->
    <section class="content-section" id="grundlagen">
      <div class="section-emoji">üí°</div>
      <h2>1. Technische Grundlagen: LDR am Microcontroller</h2>
      <h3>1.1. Funktionsprinzip LDR</h3>
      <p>
        Ein LDR (<b>Light Dependent Resistor</b>, auch Fotowiderstand genannt) ist ein elektronisches Bauteil, dessen Widerstand sich mit der Helligkeit √§ndert. 
        Je mehr Licht auf den LDR f√§llt, desto kleiner wird sein elektrischer Widerstand. Im Dunkeln ist der Widerstand sehr hoch (bis zu 200 kŒ©), bei starkem Licht sinkt er auf wenige hundert Ohm.
        <br>
        <b>Merke:</b> <i>Der Zusammenhang ist <u>invers</u>: Viel Licht ‚Üí kleiner Widerstand, wenig Licht ‚Üí gro√üer Widerstand.</i>
      </p>
      <div style="
              display: flex; 
              justify-content: center; /* Zentriert horizontal */
              align-items: center;     /* Zentriert vertikal */
             width: 100%; 
              min-height: 50vh;         /* Sorgt daf√ºr, dass der Wrapper die ganze Bildschirmh√∂he einnimmt */
              padding: 24px; 
              box-sizing: border-box;  /* Stellt sicher, dass Padding die H√∂he/Breite nicht sprengt */
             background-color: #f4f4f4; /* Nur zur Demo */
               ">
       <div style="display: flex; gap: 24px; align-items: flex-start; flex-wrap: wrap;">
        <img src="../Media/Images/LDRneu.jpeg" alt="Foto eines LDR" style="max-width: 300px; height: auto;border: 1px solid #ccc; padding: 5px;">
        
          
          <svg viewBox="0 0 100 100" style="width: 300px; height: auto; border: 1px solid #ccc; padding: 5px;">
            <line x1="10" y1="10" x2="10" y2="90" stroke="black" stroke-width="0.5"/>
            
            
            <text x="5" y="50" font-size="5" dominant-baseline="middle" text-anchor="end" transform="rotate(-90, 5, 50)">Widerstand (Œ©)</text>
            <line x1="10" y1="90" x2="90" y2="90" stroke="black" stroke-width="0.5"/>
            <text x="15" y="95" font-size="5" dominant-baseline="middle" text-anchor="middle">Dunkel</text>
            <text x="85" y="95" font-size="5" dominant-baseline="middle" text-anchor="middle">Hell</text>
            <text x="50" y="98" font-size="5" dominant-baseline="middle" text-anchor="middle">Lichtintensit√§t</text>
            <path d="M 15 15 Q 20 90 90 90" fill="none" stroke="#d9534f" stroke-width="2"/>
          </svg>
        </div>
      </div>
      <h3 style="margin-top:32px;">1.2. Der Spannungsteiler</h3>
      <p>
        Ein <b>Spannungsteiler</b> ist eine einfache Schaltung aus zwei Widerst√§nden, mit der man eine Eingangsspannung in eine kleinere Ausgangsspannung umwandeln kann.
        <br>
        Im Fotometer wird der LDR mit einem festen Widerstand in Reihe geschaltet. Die Ausgangsspannung zwischen den beiden Widerst√§nden h√§ngt davon ab, wie hell es ist ‚Äì und damit vom Widerstand des LDR.
        <br>
        <b>Formel:</b> \( V_{out} = V_{in} \cdot \frac{R_{LDR}}{R1 + R_{LDR}} \)
        <br>
        <b> So kann der Mikrocontroller die Helligkeit als Spannung messen!</b>
        <br>
        Dies ist die h√§ufigste Schaltung, bei der die Ausgangsspannung steigt, wenn es dunkler wird (hoher \( R_{\text{LDR}}\)).
      </p>
      <div style="
              display: flex; 
              justify-content: center; /* Zentriert horizontal */
              align-items: center;     /* Zentriert vertikal */
             width: 100%; 
              min-height: 50vh;         /* Sorgt daf√ºr, dass der Wrapper die ganze Bildschirmh√∂he einnimmt */
              padding: 24px; 
              box-sizing: border-box;  /* Stellt sicher, dass Padding die H√∂he/Breite nicht sprengt */
             background-color: #f4f4f4; /* Nur zur Demo */
               ">
       <div style="display: flex; gap: 24px; align-items: flex-start; flex-wrap: wrap;">
       <img src="../Media/Images/LDR_schaltungneu.png" 
         
         style="max-width: 100%; height: auto;">
          </div>
        </div>
          <p> Dies ist die h√§ufigste Schaltung, bei der die Ausgangsspannung steigt, wenn es dunkler wird (hoher \( R_{\text{LDR}}\)).</p>


    
      <h3 style="margin-top:32px;">1.3. Simulation</h3>
      <div class="ldr-simulator-container-adv">
          <h3>‚ö° Interaktive LDR-Schaltung (Spannungsteiler)</h3>
          <p>Experimentieren Sie mit der Lichtst√§rke (Input) und dem Festwiderstand (R1),
              um zu sehen, wie sich Spannung und ADC-Wert (Output) ver√§ndern.</p>
      
          <div class="slider-group">
              <label for="light-slider-adv"><strong>Lichtintensit√§t</strong> (Input)</label>
              <div class="slider-wrapper">
                  <span>üåô Dunkel</span>
                  <input type="range" id="light-slider-adv" min="0" max="100" value="0">
                  <span>‚òÄÔ∏è Hell</span>
              </div>
          </div>
      
          <div class="slider-group">
              <label for="fixed-resistor-slider"><strong>Festwiderstand (R1)</strong></label>
              <div class="slider-wrapper">
                  <span>1 kŒ©</span>
                  <input type="range" id="fixed-resistor-slider" min="1" max="50" value="10">
                  <span>50 kŒ©</span>
              </div>
              <div classid="r1-value-display">Aktuell R1: <strong id="fixed-res-display">...</strong></div>
          </div>
      
          <div class="data-display-adv">
              <h4>Simulierte Messwerte:</h4>
              <p>\(R_{LDR}\) = <strong id="ldr-res-display">...</strong></p>
              <hr>
              <p>\(V_{out}\) = <strong id="output-volt-display">...</strong></p>
              <hr>
              <p>ADC-Wert ( von 0-1023) = <strong id="adc-value-display">...</strong></p>
          </div>

          <div class="circuit-info-adv">
           <strong>Formel:(Spannungsteiler bei \(V_{in}=5V\) ):</strong>
          <p>
           $$V_{out} = V_{in} \cdot \frac{R_{LDR}}{R1 + R_{LDR}}$$
         </p>

         </div>
      
      <script>
          document.addEventListener('DOMContentLoaded', function() {
      
              // 1. Alle HTML-Elemente holen
              const lightSlider = document.getElementById('light-slider-adv');
              const r1Slider = document.getElementById('fixed-resistor-slider');
      
              const ldrResDisplay = document.getElementById('ldr-res-display');
              const fixedResDisplay = document.getElementById('fixed-res-display');
              const voltDisplay = document.getElementById('output-volt-display');
              const adcDisplay = document.getElementById('adc-value-display');
      
              // 2. Physische Konstanten
              const V_IN = 5.0;      // 5 Volt Versorgungsspannung
              const ADC_MAX = 1023;  // 10-Bit ADC (wie Arduino)
      
              // 3. Die Hauptfunktion
              function updateSimulation() {
                  
                  // --- INPUTS auslesen ---
                  
                  // Lichtlevel (0-100)
                  const lightLevel = parseFloat(lightSlider.value);
                  
                  // Festwiderstand R1 (1-50 kŒ©)
                  const r1_kOhm = parseFloat(r1Slider.value);
                  
                  
                  // --- BERECHNUNGEN ---
      
                  // A) LDR-Widerstand (R_LDR) simulieren
                  // (Exponentielle Abnahme, um realistischer zu sein als linear)
                  // (100% Licht -> 1 kŒ©, 0% Licht -> ~200 kŒ©)
                  const minRes = 1.0;  // kŒ© bei max Licht
                  const maxRes = 200.0; // kŒ© bei min Licht
                  const ldr_kOhm = minRes + (maxRes - minRes) * Math.pow(1 - (lightLevel / 100), 4);
                  
                  // B) Spannungsteiler (V_out) berechnen
                  // V_out = V_in * (R_LDR / (R1 + R_LDR))
                  const vOut = V_IN * (ldr_kOhm / (r1_kOhm + ldr_kOhm));
      
                  // C) ADC-Wert (Analog-Digital-Wandler) berechnen
                  // (vOut / V_IN) * ADC_MAX
                  const adcValue = (vOut / V_IN) * ADC_MAX;
      
                  
                  // --- OUTPUTS anzeigen ---
                  
                  // LDR-Wert
                  ldrResDisplay.textContent = `${ldr_kOhm.toFixed(1)} kŒ©`;
                  
                  // R1-Wert
                  fixedResDisplay.textContent = `${r1_kOhm.toFixed(0)} kŒ©`;
                  
                  // Spannung
                  voltDisplay.textContent = `${vOut.toFixed(2)} V`;
                  
                  // ADC-Wert
                  adcDisplay.textContent = `${Math.round(adcValue)}`;
              }
      
              // 4. Event-Listener an BEIDE Slider h√§ngen
              lightSlider.addEventListener('input', updateSimulation);
              r1Slider.addEventListener('input', updateSimulation);
      
              // 5. Simulation beim Laden der Seite initialisieren
              updateSimulation();
          });
      </script>
    </section>
    <!-- ... weitere Sektionen wie Quiz, Code, Troubleshooting, etc. ... -->
  </main>
  <footer>
    <div>CC BY Lizenz, Andreas Sexauer, Zentrum f√ºr Mediales Lernen am Karlsruher Institut f√ºr Technologie (KIT).</div>
    <div><small>Dieses Lernmodul wurde mithilfe von k√ºnstlicher Intelligenz (KI) konzipiert und programmiert.</small></div>
  </footer>
  <script>
    // Progressbar
    const progressBar = document.getElementById('progress-bar');
    window.addEventListener('scroll', () => {
      const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
      const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const progress = (scrollTop / scrollHeight) * 100;
      progressBar.style.width = progress + '%';
    });
    // Section Observer
    const sections = document.querySelectorAll('.content-section');
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) entry.target.classList.add('is-visible');
      });
    }, { threshold: 0.15 });
    sections.forEach(sec => observer.observe(sec));
    // highlight.js
    hljs.highlightAll();
  </script>

</body>
</html>

